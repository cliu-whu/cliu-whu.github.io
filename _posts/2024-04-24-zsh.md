---
layout: post
title: "zsh"
categories: Unix_Linux
---

# å®‰è£…
`sudo apt install zsh`<br />zshçš„é…ç½®æ–‡ä»¶ä¸º`~/.zshrc`
# å®‰è£…oh-my-zsh
å‘½ä»¤è‡ªåŠ¨å®‰è£… <br />`sh -c "$(wget [https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh](https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh) -O -)"`<br />æ‰‹åŠ¨å®‰è£…<br />ä»[https://github.com/ohmyzsh/ohmyzsh/](https://github.com/ohmyzsh/ohmyzsh/)ä¸‹è½½codeå‹ç¼©åŒ…è§£å‹<br />é…ç½®è·¯å¾„ï¼Œå¦‚<br />`export ZSH="$HOME/.oh-my-zsh"`
# é…ç½®oh-my-zsh
è®¾ç½®ä¸»é¢˜ï¼Œå¦‚<br />`ZSH_THEME="philips"`<br />æ¨èï¼šphilips cloud jonathan agnoster<br />è®¾ç½®æ’ä»¶ï¼Œå¦‚<br />`plugins=(git z zsh-syntax-highlighting zsh-autosuggestions)`
# å®‰è£…æ’ä»¶
## zsh-syntax-highlighting
è¯¥æ’ä»¶å¯ä»¥å°†ä¸èƒ½æ‰¾åˆ°çš„å‘½ä»¤æ˜¾ç¤ºä¸ºçº¢è‰²<br />å®‰è£…çš„å‘½ä»¤<br />`git clone [https://github.com/zsh-users/zsh-syntax-highlighting.git](https://github.com/zsh-users/zsh-syntax-highlighting.git) $ZSH_CUSTOM/plugins/zsh-syntax-highlighting`
## zsh-autosuggestions
ä»¥ç°è‰²æ˜¾ç¤ºå‘½ä»¤å»ºè®®ï¼ŒæŒ‰â†’æ–¹å‘é”®æ¥å—<br />`git clone [https://github.com/zsh-users/zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions) $ZSH_CUSTOM/plugins/zsh-autosuggestions`<br />æˆ–æ‰‹åŠ¨ä¸‹è½½ç½®äº`$ZSH_CUSTOM/plugins/`ä¸­
# ä¸»é¢˜è‡ªå®šä¹‰
## PROMPTè¯­æ³•
 ä½¿ç”¨é¢œè‰²ä¹‹å‰éœ€`autoload -U colors && colors`ã€‚<br />`%T`						ç³»ç»Ÿæ—¶é—´ï¼ˆæ—¶ï¼šåˆ†ï¼‰<br />`%*`						ç³»ç»Ÿæ—¶é—´ï¼ˆæ—¶ï¼šåˆ†ï¼šç§’ï¼‰<br />`%D`						ç³»ç»Ÿæ—¥æœŸï¼ˆå¹´-æœˆ-æ—¥ï¼‰<br />`%n`						ä½ çš„ç”¨æˆ·å<br />`%d`						ä½ ç›®å‰çš„å·¥ä½œç›®å½•<br />`%~`						ä½ ç›®å‰çš„å·¥ä½œç›®å½•ç›¸å¯¹äºï½çš„ç›¸å¯¹è·¯å¾„<br />`%M`						è®¡ç®—æœºçš„ä¸»æœºå<br />`%m`						è®¡ç®—æœºçš„ä¸»æœºåï¼ˆæˆªæ–­ï¼‰<br />`%l`						ä½ å½“å‰çš„tty<br />`%#`						ç”¨æˆ·ç»„ï¼Œ#ï¼ˆæ™®é€šç”¨æˆ·ï¼‰/%ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰<br />`%B - %b`				å¼€å§‹åˆ°ç»“æŸä½¿ç”¨ç²—ä½“æ‰“å°<br />`%U - %u`				å¼€å§‹åˆ°ç»“æŸä½¿ç”¨ä¸‹åˆ’çº¿æ‰“å°<br />`%F{color} - %f `			é…ç½®æ–‡å­—é¢œè‰²ï¼Œæ¢å¤é»˜è®¤é¢œè‰²<br />`%K{color} - %k`			é…ç½®èƒŒæ™¯é¢œè‰²ï¼Œæ¢å¤é»˜è®¤é¢œè‰²<br />`%{ğŸ’»%2G%}`				emojiå ä¸¤æ ¼ï¼Œé˜²æ­¢å…‰æ ‡é”™ä½<br />`%{$fg[color]%}`			é…ç½®æ–‡å­—é¢œè‰²ï¼Œ$fg[color]åŒæ ·å¯ç”¨äºechoç­‰<br />`%{$fg_bold[color]%}`		é…ç½®æ–‡å­—é¢œè‰²ä¸”ä¸ºç²—ä½“<br />`%{$fg_no_bold[red]%}`		é…ç½®æ–‡å­—é¢œè‰²ä¸”ä¸ºéç²—ä½“<br />`%{$reset_color%}`		æ¢å¤é»˜è®¤æ–‡å­—é¢œè‰²<br />æ‰‹å†Œ[https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html#Special-characters](https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html#Special-characters)<br />**æ³¨ï¼š**æ›´æ¨èç”¨`%F{color} `è€Œä¸æ˜¯`%{$fg[color]%}`ï¼Œå› ä¸º`%F{color} `ä¸­å¯ä»¥ç”¨æ•°å­—ï¼ˆ0ï½255ï¼‰ä»£è¡¨é¢œè‰²ï¼Œå¯é€‰çš„é¢œè‰²æ›´å¤šã€‚
## lç¤ºä¾‹
```shell
autoload -U colors && colors
#   get current git branch
git_branch()
{
    git branch 2> /dev/null | sed -n -e 's/^\* \(.*\)/ğŸš€\1 /p'
}
#   get current time, select the corresponding icon
time_icon()
{
    time_icons=(ğŸ• ğŸ•œ ğŸ•‘ ğŸ• ğŸ•’ ğŸ• ğŸ•“ ğŸ•Ÿ ğŸ•” ğŸ•  ğŸ•• ğŸ•¡ ğŸ•– ğŸ•¢ ğŸ•— ğŸ•£ ğŸ•˜ ğŸ•¤ ğŸ•™ ğŸ•¥ ğŸ•š ğŸ•¦ ğŸ•› ğŸ•§)
    hour=$(date +%I)
    minute=$(date +%M)
    n=`expr $hour \* 2 - 1 + $minute / 30`
    echo $time_icons[n]
}
#
setopt PROMPT_SUBST
export PROMPT="%F{232}${(l.`expr $COLUMNS - 10`..- .)}
%K{237}%{ğŸŒ%2G%}%F{39}%n|%m %F{243}î‚± %F{46}%c %k%F{237}î‚°%f"
export RPROMPT='%F{$red}$(git_branch)%K{blue}$(time_icon)%F{51}%*%k%f'
#
alias ls='ls --color'
export LSCOLORS="Gxfxcxdxbxegedabagacad"
export LS_COLORS='no=00:fi=00:di=01;34:ln=00;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=41;33;01:ex=00;32:*.cmd=00;32:*.exe=01;32:*.com=01;32:*.bat=01;32:*.btm=01;32:*.dll=01;32:*.tar=00;31:*.tbz=00;31:*.tgz=00;31:*.rpm=00;31:*.deb=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.lzma=00;31:*.zip=00;31:*.zoo=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.tb2=00;31:*.tz2=00;31:*.tbz2=00;31:*.avi=01;35:*.bmp=01;35:*.fli=01;35:*.gif=01;35:*.jpg=01;35:*.jpeg=01;35:*.mng=01;35:*.mov=01;35:*.mpg=01;35:*.pcx=01;35:*.pbm=01;35:*.pgm=01;35:*.png=01;35:*.ppm=01;35:*.tga=01;35:*.tif=01;35:*.xbm=01;35:*.xpm=01;35:*.dl=01;35:*.gl=01;35:*.wmv=01;35:*.aiff=00;32:*.au=00;32:*.mid=00;32:*.mp3=00;32:*.ogg=00;32:*.voc=00;32:*.wav=00;32:*.patch=00;34:*.o=00;32:*.so=01;35:*.ko=01;31:*.la=00;33'

```
## é…è‰²è¡¨
zshä¸­è¾“å‡ºå¸¦é¢œè‰²æ–‡å­—çš„æ–¹æ³•ï¼ˆé¢œè‰²åˆ†åˆ«ä¸ºblueå’Œ190ï¼‰ï¼š

1. `echo $fg[blue]'text'`
2. `echo "\033[38;5;190m"'text'`

zshä¸­è¾“å‡ºå¸¦é¢œè‰²èƒŒæ™¯çš„æ–¹æ³•ï¼ˆé¢œè‰²ä¸º190ï¼‰ï¼š<br />`echo "\033[48;5;190m"'text'`<br />æ‰“å°é¢œè‰²è¡¨ï¼ˆredã€blueç­‰ï¼‰ï¼š
```shell
#!/bin/zsh
autoload -U colors && colors
for COLOR in red green yellow blue magenta cyan black white; do
    echo -n ${fg_no_bold[$COLOR]}  $COLOR
done
echo
for COLOR in red green yellow blue magenta cyan black white; do
    echo -n ${fg_bold[$COLOR]}  $COLOR
done
echo
```
![image.png](/assets/png/2024-04-24-zsh-1.png)<br />æ‰“å°é¢œè‰²è¡¨ï¼ˆ0~255ï¼‰ï¼š
```shell
#!/bin/zsh
width()
{
    if [ $1 -gt 99 ]; then
        echo "$1"
    elif [ $1 -gt 9 ]; then
        echo " $1"
    else
        echo "  $1"
    fi
}
for ROW in 0 1; do
    for COL in {0..7}; do
        COLOR=`expr $ROW \* 8 + $COL`
        echo -ne "\033[0;38;5;${COLOR}m"" $(width ${COLOR}) "
        echo -ne "\033[0;1;38;5;${COLOR}m""$(width ${COLOR}) "
        echo -ne "\033[0;30;48;5;${COLOR}m""   $(width ${COLOR})   "
    done
    echo "\033[0m"
done
echo
for ROW in {0..37}; do
    for COL in {0..5}; do
        COLOR=`expr $ROW \* 6 + $COL + 16`
        echo -ne "\033[0;38;5;${COLOR}m"" $(width ${COLOR}) "
        echo -ne "\033[0;1;38;5;${COLOR}m""$(width ${COLOR}) "
        echo -ne "\033[0;30;48;5;${COLOR}m""   $(width ${COLOR})   "
    done
    echo "\033[0m"
done
```
![image.png](/assets/png/2024-04-24-zsh-2.png)

